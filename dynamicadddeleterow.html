<template>

    <lightning-card title="New Account" icon-name="standard:account">
    
        <div class="slds-p-around_medium" >
            <lightning-button-icon icon-name="utility:new" alternative-text="Add New Row" size="medium"
                                    onclick={addNewRow}></lightning-button-icon>
        </div>


        <template if:true={showSpinner}>
            <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
        </template>
        
        <template for:each={listOfNewRows} for:item="rowItem">
            <lightning-record-edit-form key={rowItem.rowId} object-api-name="Account" onsuccess={handleSingleSave}
                                             onerror={handleError} >
            
                <lightning-layout  multiple-rows="true">
                    <lightning-layout-item padding="around-small" size="2" >
                        <lightning-input-field field-name="Name" class="newAccountClass" variant="label-stacked"></lightning-input-field>            
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="2" >
                        <lightning-input-field field-name="Industry" class="newAccountClass" variant="label-stacked"></lightning-input-field>            
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="2" >
                        <lightning-input-field field-name="Rating" class="newAccountClass" variant="label-stacked"></lightning-input-field>            
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="2">
                        <lightning-input-field field-name="AccountNumber" class="newAccountClass" variant="label-stacked"></lightning-input-field>            
                    </lightning-layout-item>
                    <lightning-layout-item  size="2"  class="slds-p-top_x-large slds-p-left_small">
                        <lightning-button-icon icon-name="utility:save" alternative-text="Save Row" size="medium"
                                                name={rowItem.rowId} onclick={handleSubmit} type="submit"></lightning-button-icon>
                        <lightning-button-icon icon-name="utility:close" alternative-text="Cancel Row" size="medium"
                                                onclick={cancelRow} name={rowItem.rowId} class="slds-p-left_x-small" ></lightning-button-icon>
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-record-edit-form>
        </template><br/>
        <template if:true={showAllSaveAndCancel}>
            <div class="slds-text-align_center slds-p-bottom_small">
                <lightning-layout-item>
                    <lightning-button label="Save All" variant="brand" onclick={saveAll} type="submit"></lightning-button>
                    <lightning-button label="Cancel All" variant="destructive" onclick={cancelAll} class="slds-p-left_x-small" ></lightning-button>
                </lightning-layout-item>
            </div>
        </template>
    </lightning-card>
</template>
